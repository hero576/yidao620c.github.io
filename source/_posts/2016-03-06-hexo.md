---
title: 使用hexo搭建github博客
date: 2016-03-09 19:47:53
categories: 朝花夕拾
tags: hexo
---

## 介绍

最今天我又折腾了我的博客，将它从octopress迁移到hexo上来。之前还专门写了一篇怎样利用octopress搭建博客的文章，最近试用了一下hexo，毫不犹豫的迁移过来了，实在是忍受不了octopress的速度，还有稳定性，经常莫名其妙的出错。

hexo：是一个台湾人做的基于Node.js的静态博客程序，优势是生成静态文件的速度非常快，支持markdown，我最终选定它的原因是它速度快而且不容易出错，并且可以一键部署到github或者其它静态服务器上去。折腾了一天总算搞定。<!--more-->

## 安装

我这个教程是基于window 64系统，Hexo3版本

### 安装依赖软件
[Node.js](https://nodejs.org/en): node.js用来创建hexo博客框架的，我当前安装版本为：node-v5.7.1-x64
[Git客户端](http://git-scm.com/download/win): 把本地的hexo内容提交到github上去，我当前安装的是Git-2.7.1-64-bit

### 安装hexo
利用 npm 命令即可安装。打开窗口控制台，输入安装hexo命令：
`npm install -g hexo`

### 初始化
安装完成后，在你喜爱的文件夹下（如D:\hexo），控制台执行以下指令，hexo会自动在目标文件夹建立网站所需要的所有文件。
`hexo init`

安装依赖包：
`npm install`

一切准备就绪让我们试验下，在D:\hexo内执行以下命令：
```
hexo g
hexo s
```
然后用浏览器访问http://localhost:4000， 此时，你应该看到了一个漂亮的博客了，当然这个博客只是在本地的，别人是看不到的，hexo3.0使用的默认主题是landscape。


## 发布到github上面

首先你得有github账号，如果没有就去注册个，很简单的步骤。

### 创建repository

repository相当于一个仓库，用来放置你的代码文件。登陆进入Github，并进入个人页面，选择repositories，然后New一个repository。
创建时，只需要填写Repository name即可。格式必须为yourname.github.io，比如我的是yidao620c.github.io

### 将本地博客部署上去

先修改D:\hexo下的_config.yml文件,记得一点，hexo的配置文件中任何’:’后面都是带一个空格的

```
deploy:
    type: git
    repository: https://github.com/yidao620c/yidao620c.github.io.git
    branch: master
```

如果你是第一次使用Github或者是已经使用过，但没有配置过SSH，则可能需要配置一下SSH。
在Git Bash输入以下指令（任意位置点击鼠标右键），检查是否已经存在了SSH keys。
`ls -al ~/.ssh`

如果不存在就没有关系，如果存在的话，直接删除.ssh文件夹里面所有文件：

输入以下指令（邮箱就是你注册Github时候的邮箱）后回车，出现提示让你输入的时候一直按回车：
`ssh-keygen -t rsa -C "yidao620@gmail.com"`

然后键入以下指令：
```
eval `ssh-agent -s`
ssh-add
```
到了这一步，就可以添加SSH key到你的Github账户了。键入以下指令，拷贝Key（先拷贝了，等一下可以直接粘贴，不放心的在执行下面命令后，先黏贴在记事本上）：
`clip < ~/.ssh/id_rsa.pub`
然后到Github里面，点击右上角的设置图标Settings,找到SSH keys,Ttile随便你命名，Key就黏贴上你刚才复制的key,然后点Add SSH key，最后会让你重新输入下gitHub的密码
最后还是测试一下吧，键入以下命令：
`ssh -T git@github.com`
你可能会看到有警告，输入“yes”就好

还要安装hexo-deployer-git这个模块:
`npm install hexo-deployer-git --save`

以上就表示SSH配置好了，执行以下命令部署到Github上。
```
hexo g
hexo d
```
提示输入gitHub的账号密码，就能访问你得博客网站了。我的是: yidao620c.github.io

## 发表一篇文章
在你的D:\hexo目录下面，控制台执行命令：
`hexo new "Hello World"`
会自动在D:\hexo\source\_posts文件夹生成一个hello-world.md文件，用编辑器打开，在里面写文章。
记住hexo中写文章使用的是Markdown语法，自己去google下这个语法吧，很方便很强大。里面的初始内容
```
title: Hello World #可以改成中文的，如“新文章”
date: 2016-03-06 16:04:09 #发表日期，一般不改动
categories: blog #文章文类
tags: [文章, 测试] #文章标签，多于一项时用这种格式，只有一项时使用tags: blog
---
#这里是正文，用markdown写，你可以选择写一段显示在首页的简介后，加上
<!--more-->，在<!--more-->之前的内容会显示在首页，之后的内容会被隐藏，当游客点击Read more才能看到。
```

写完文章后，你可以使用`hexo g`生成静态文件。`hexo s`在本地预览效果。`hexo d`同步到github

## hexo主题及其配置

如果你不喜欢默认主题，那么可以去hexo官网找更多的[主题](https://hexo.io/themes/)。
我这里选择Jacman主题说明一下

### 安装主题

`$ git clone https://github.com/wuchong/jacman.git themes/jacman`

### 启用主题
修改你的博客根目录下的config.yml配置文件中的theme属性，将其设置为jacman

### 更新主题
```
cd themes/jacman
git pull
```
更新好后，本地启动起来效果
`hexo server -g  #生成加预览`

### 主题的_config.yml配置
具体配置请直接参考[如何使用 Jacman 主题](http://wuchong.me/blog/2014/11/20/how-to-use-jacman/)

## 多台电脑同时维护博客

之前利用了 Hexo+Github搭建了自己的博客网站，但问题来了：如何在多台电脑上对此博客进行维护？

### 思路

* 对于一个已创建的博客目录，其已通过hexo建立了public目录下的内容与远程仓库yidao620c@github.com的master分支的连接关系，通过hexo的hexo deploy命令即可保持更新；
* 因此只需要在此仓库yidao620c@github.com上再创建一个分支如source，将其与hexo下其他文件如node_modules、themes、scaffolds等（即除了public目录及.gitignore包含的文件外）进行同步绑定。
* 在不同的电脑下设置好hexo环境，通过hexo命令维护master分支，通过git命令维护source分支即可。

### 具体步骤

（假定最初创建博客为A，其他另一个为B)
1) 在A中的git_blog目录下，建立source分支：
```
$ git branch source // 创建source分支
$ git checkout source // 切换到source分支
$ git remote -v //查看远程分支名字
 // 我的内容为如下，说明已绑定
 // origin    git@github.com:yidao620c/yidao620c.github.com.git (fetch)
 // origin	git@github.com:yidao620c/yidao620c.github.com.git (push)
修改.gitignore文件，添加"public/"字段至其中。
$ git push origin source // 将当前git_blog下的内容push到Github上的远程仓库的source分支（会自动创建）上

```
2) 在B中建立git_blog目录，安装npm，安装Hexo，添加SSH，然后使用
```
$ git clone -b source git@github.com:yidao620c/yidao620c.github.com.git
```
在B中建立本地的source分支，并与远程的source分支进行了绑定。git_blog下的yidao620c.github.com文件夹里保存了和远程source分支相同的内容。

### 使用方法
在任意一台mac操作，都需先切换并保持在source分支上。使用git命令管理source文件；使用hexo命令进行同步至远程master分支，无需处理本地master分支
1. 在A中使用Hexo的new、g、d方法添加、生成、部署新的博客，内容都会被同步自动放到Github的master分支上；
2. 在1>.之后，同样保证B的git当前在git_blog下的source分支下
先使用：
`git pull origin source`
获得Github的source分支上的最新版本，再使用：
```
$ git add -u
$ git commit -m ""
$ git push origin source
```
将新内容提交至Github的source分支上，完成source管理。

### 其他说明
```
git add -f "" // 强制添加文件/文件夹为tracked状态
$ git rm --cache "" // 解除文件为tracked状态
$ git rm -r --cache "" // 解除文件夹为tracked状态
```

## FAQ

* 遇到有大括号的代码块，如果多行的不用管，如果单行的就单个反引号，并且在里面加raw标签

## 参考

[hexo干货系列](http://tengj.top/tags/hexo/)
[让你的Octopress博客在多台Mac上同时使用](http://wangzz.github.io/blog/2014/04/02/ru-he-pei-zhi-rang-ni-de-octopressbo-ke-zai-duo-tai-macshang-tong-shi-shi-yong/)
